Submitted By:            Igor Živković
Date:                    2016-01-19
Initial Package Version: 2.8.5
Upstream Status:         Not submitted
Origin:                  Self
Description:             Fixes a syntax error and configure output on BusyBox systems.

--- ffmpeg-3.1.2.orig/configure
+++ ffmpeg-3.1.2/configure
@@ -468,7 +468,7 @@
 
 log_file(){
     log BEGIN $1
-    pr -n -t $1 >> $logfile
+    cat $1 | awk '{printf "%5d\t%s\n", NR, $0}' >> $logfile
     log END $1
 }
 
@@ -3319,7 +3319,7 @@
 
 print_in_columns() {
     cols=$(expr $ncols / 24)
-    cat | tr ' ' '\n' | sort | pr -r "-$cols" -w $ncols -t
+    cat | tr ' ' '\n' | sort | xargs printf "%-24s%-24s%-24s\n"
 }
 
 show_list() {
@@ -4927,7 +4927,7 @@
         # found in the SDK headers by default. (Alternatively, we could force
         # _WIN32_WINNT to 0x0602 in that case.)
         check_${pfx}cpp_condition stdlib.h "defined(_WIN32_WINNT)" ||
-            { check_${pfx}cpp <<EOF && add_${pfx}cppflags -D_WIN32_WINNT=0x0502; }
+            { check_${pfx}cpp <<EOF && add_${pfx}cppflags -D_WIN32_WINNT=0x0502;
 #ifdef WINAPI_FAMILY
 #include <winapifamily.h>
 #if !WINAPI_FAMILY_PARTITION(WINAPI_PARTITION_DESKTOP)
@@ -4935,7 +4935,7 @@
 #endif
 #endif
 EOF
-    elif check_${pfx}cpp_condition stddef.h "defined __KLIBC__"; then
+    } elif check_${pfx}cpp_condition stddef.h "defined __KLIBC__"; then
         eval ${pfx}libc_type=klibc
     elif check_${pfx}cpp_condition sys/cdefs.h "defined __BIONIC__"; then
         eval ${pfx}libc_type=bionic

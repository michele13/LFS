<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY acpid-homepage      "http://sourceforge.net/projects/acpid2/">
  <!ENTITY acpid-wikipedia     "http://en.wikipedia.org/wiki/Advanced_Configuration_and_Power_Interface">
  <!ENTITY acpid-download-http "&sourceforge-repo;/acpid2/acpid-&acpid-version;.tar.xz">
  <!ENTITY acpid-download-ftp  " ">
  <!ENTITY acpid-md5sum        "252bb4b3a8053227e743e267d98b8a52">
  <!ENTITY acpid-size          "150 KB">
  <!ENTITY acpid-buildsize     "2.3 MB">
  <!ENTITY acpid-time          "0.1 SBU">
]>

<sect1 id="acpid" xreflabel="acpid-&acpid-version;">
  <?dbhtml filename="acpid.html"?>

  <title>acpid-&acpid-version;</title>

  <sect2 role="package">
    <title>Introduction</title>

    <para>
      The acpid (Advanced Configuration and Power Interface event daemon) is a
      completely flexible, totally extensible daemon for delivering ACPI events.
      It listens on netlink interface and when an event occurs, executes
      programs to handle the event. The programs it executes are configured
      through a set of configuration files, which can be dropped into place by
      packages or by the user.
    </para>

    <note>
      <para>
        This package can be replaced with BusyBox applet.
      </para>
    </note>

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Homepage: <ulink url="&acpid-homepage;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Wikipedia: <ulink url="&acpid-wikipedia;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Download (HTTP): <ulink url="&acpid-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Download (FTP): <ulink url="&acpid-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Download MD5 sum: &acpid-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Download size: &acpid-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimated disk space required: &acpid-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimated build time: &acpid-time;
        </para>
      </listitem>
    </itemizedlist>

  </sect2>

  <sect2>
    <title>Installation</title>

    <para>
      Install the package by running the following commands:
    </para>

<screen><userinput>./configure &amp;&amp;
make</userinput></screen>

    <para>
      Now, as the <systemitem class="username">root</systemitem> user:
    </para>

<screen role="root"><userinput>make install</userinput></screen>

  </sect2>

  <sect2>
    <title>Configuration</title>

    <para>
      acpid is configured by user defined events. Place event files under
      <filename class="directory">/etc/acpi/events</filename> directory or, if
      using BusyBox applet, under <filename
      class="directory">/etc/acpi/&lt;ACTION&gt;</filename> directory. If an
      event occurs, <command>acpid</command> recurses through the event files in
      order to see if the regex defined after "event" matches. If they do,
      action is executed.
    </para>

    <para>
      The following brief example will suspend the system when the laptop lid
      is closed (it requires <xref linkend="pm-utils"/>):
    </para>

<screen role="root"><userinput>mkdir -pv /etc/acpi/events &amp;&amp;
cat &gt; /etc/acpi/events/lid &lt;&lt; "EOF"
<literal>event=button/lid
action=/etc/acpi/lid.sh</literal>
EOF
cat &gt; /etc/acpi/lid.sh &lt;&lt; "EOF"
<literal>#!/bin/sh
/bin/grep -q open /proc/acpi/button/lid/LID/state &amp;&amp; exit 0
/usr/sbin/pm-suspend</literal>
EOF
chmod -v +x /etc/acpi/lid.sh</userinput></screen>

    <para>
      Alternatively, if using BusyBox applet:
    </para>

<screen role="root"><userinput>mkdir -pv /etc/acpi/LID &amp;&amp;
cat &gt; /etc/acpi/LID/00000080 &lt;&lt; "EOF"
<literal>pm-suspend</literal>
EOF
chmod -v +x /etc/acpi/LID/00000080</userinput></screen>

    <para>
      Unfortunately, not every computer labels ACPI events in the same way. To
      determine how your buttons are recognized, use the
      <command>acpi_listen</command> tool. Also, look in package documentation
      for more examples.
    </para>

    <sect3 id="acpid-init">
      <title>Boot Script</title>

      <para>
        To automatically start <command>acpid</command> when the system is
        rebooted, install the <filename>/etc/rc.d/init.d/acpid</filename>
        boot script from the <xref linkend="bootscripts"/> package.
      </para>


<screen role="root"><userinput>make install-acpid</userinput></screen>

    </sect3>

  </sect2>

  <sect2>
    <title>Contents</title>

    <indexterm zone="acpid">
      <primary sortas="b-acpid">acpid</primary>
    </indexterm>
    <indexterm zone="acpid">
      <primary sortas="b-acpi_listen">acpi_listen</primary>
    </indexterm>
    <indexterm zone="acpid">
      <primary sortas="b-kacpimon">kacpimon</primary>
    </indexterm>
    <indexterm zone="acpid">
      <primary sortas="f-acpid">acpid</primary>
    </indexterm>

    <para>
      Incomplete list of installed files and directories:
    </para>

<screen><literal>/etc/acpi
/usr/local/bin/acpi_listen
/usr/local/sbin/acpid
/usr/local/sbin/kacpimon
/usr/local/share/doc/acpid/
/usr/local/share/man/man8/acpid.8
/usr/local/share/man/man8/acpi_listen.8
/usr/local/share/man/man8/kacpimon.8</literal></screen>

  </sect2>

</sect1>

<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY ffmpeg-homepage      "https://www.ffmpeg.org/">
  <!ENTITY ffmpeg-wikipedia     "https://en.wikipedia.org/wiki/FFmpeg">
  <!ENTITY ffmpeg-download-http "http://ffmpeg.org/releases/ffmpeg-&ffmpeg-version;.tar.xz">
  <!ENTITY ffmpeg-download-ftp  " ">
  <!ENTITY ffmpeg-md5sum        "4ba7033da5d9ac4d0391516c7e5d97e4">
  <!ENTITY ffmpeg-size          "7.4 MB">
  <!ENTITY ffmpeg-buildsize     "142 MB">
  <!ENTITY ffmpeg-time          "5.2 SBU">
]>

<sect1 id="ffmpeg" xreflabel="ffmpeg-&ffmpeg-version;">
  <?dbhtml filename="ffmpeg.html"?>

  <title>ffmpeg-&ffmpeg-version;</title>

  <sect2 role="package">
    <title>Introduction</title>

    <para>
      FFmpeg is a solution to record, convert and stream audio and video. It is
      a very fast video and audio converter and it can also acquire from a live
      audio/video source. Designed to be intuitive, the command-line interface
      (<command>ffmpeg</command>) tries to figure out all the parameters, when
      possible. FFmpeg can also convert from any sample rate to any other, and
      resize video on the fly with a high quality polyphase filter. FFmpeg can
      use a Video4Linux compatible video source and any Open Sound System audio
      source.
    </para>

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Homepage: <ulink url="&ffmpeg-homepage;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Wikipedia: <ulink url="&ffmpeg-wikipedia;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Download (HTTP): <ulink url="&ffmpeg-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Download (FTP): <ulink url="&ffmpeg-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Download MD5 sum: &ffmpeg-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Download size: &ffmpeg-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimated disk space required: &ffmpeg-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimated build time: &ffmpeg-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Additional Downloads</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Recommended patch: <ulink
          url="&patch-root;ffmpeg/ffmpeg-&ffmpeg-version;-busybox-1.patch"/>
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dependencies</bridgehead>

    <bridgehead renderas="sect4">Recommended</bridgehead>
    <para>
      <xref linkend="yasm"/>,
      <xref linkend="libass"/>,
      <xref linkend="fdk-aac"/>,
      <xref linkend="freetype"/>,
      <xref linkend="lame"/>,
      <xref linkend="libtheora"/>,
      <xref linkend="libvorbis"/>,
      <xref linkend="libvpx"/>,
      <xref linkend="opus"/>,
      <xref linkend="x264"/>,
      <xref linkend="x265"/>, and
      <xref linkend="libressl"/>
    </para>

    <bridgehead renderas="sect4">Optional</bridgehead>
    <para>
      <xref linkend="libcdio"/> (to identify and play CDs),
      <xref linkend="faac"/>,
      <xref linkend="libwebp"/>,
      <xref linkend="openjpeg"/>,
      <xref linkend="speex"/>,
      <xref linkend="xvid"/>,
      <xref linkend="fontconfig"/>,
      <xref linkend="v4l-utils"/>,
      <!--<ulink url="https://files.dyne.org/frei0r/snapshots/">frei0r</ulink>,-->
      <ulink url="http://xhevc.com/en/hevc/decoder/download.jsp">HEVC/H.265</ulink>,
      <ulink url="http://www.ladspa.org/">LADSPA</ulink>,
      <ulink url="http://www.libssh.org/">libssh</ulink>,
      <ulink url="http://zapping.sourceforge.net/ZVBI/">ZVBI</ulink>,
      <ulink url="http://tipok.org.ua/node/17">libaacplus</ulink>,
      <ulink url="http://www.videolan.org/developers/libbluray.html">libbluray</ulink>,
      <ulink url="http://caca.zoy.org/">libcaca</ulink>,
      <ulink url="http://www.celt-codec.org/">libcelt</ulink>,
      <ulink url="http://sourceforge.net/projects/libdc1394">libdc1394</ulink>,
      <ulink url="http://www.speech.cs.cmu.edu/flite/">Flite</ulink>,
      <ulink url="http://www.quut.com/gsm/">GSM</ulink>,
      <ulink url="https://ieee1394.wiki.kernel.org/index.php/Libraries">libiec61883</ulink>,
      <ulink url="https://github.com/dekkers/libilbc">libilbc</ulink>,
      <ulink url="http://sourceforge.net/projects/modplug-xmms/">libmodplug</ulink>,
      <ulink url="https://github.com/Distrotech/libnut">libnut</ulink> (Git checkout),
      <ulink url="http://sourceforge.net/projects/opencore-amr">OpenCore AMR</ulink>,
      <ulink url="http://opencv.org/">OpenCV</ulink>,
      <ulink url="http://rtmpdump.mplayerhq.hu/">librtmp</ulink>,
      <ulink url="http://diracvideo.org/">Schroedinger</ulink>,
      <ulink url="http://www.twolame.org/">TwoLAME</ulink>,
      <ulink url="http://sourceforge.net/projects/opencore-amr/files/vo-aacenc/">vo-aaenc</ulink>,
      <ulink url="http://sourceforge.net/projects/opencore-amr/files/vo-amrwbenc/">vo-amrwbenc</ulink>,
      <ulink url="http://xavs.sourceforge.net/">libxavs</ulink> (SVN checkout),
      <ulink url="http://kcat.strangesoft.net/openal-releases/">OpenAL</ulink>, and
      <ulink url="http://www.videolan.org/developers/x265.html">x265 (H.265/MPEG-H HEVC)</ulink>
    </para>

  </sect2>

  <sect2>
    <title>Installation</title>

    <para>
      Prepare the package for compilation:
    </para>

<screen><userinput>patch -p1 -i ../ffmpeg-&ffmpeg-version;-busybox-1.patch &amp;&amp;
sed -i "s/-lflite\"/-lflite -lasound\"/" configure &amp;&amp;
./configure --prefix=/ \
            --enable-gpl \
            --enable-version3 \
            --enable-nonfree \
            --disable-static \
            --enable-shared \
            --disable-debug \
            --enable-libass \
            --enable-libfdk-aac \
            --enable-libmp3lame \
            --enable-libtheora \
            --enable-libvorbis \
            --enable-libvpx \
            --enable-libx264 \
            --enable-libx265 \
            --enable-openssl \
            --enable-x11grab</userinput></screen>

    <para>
      Compile the package:
    </para>

<screen><userinput>make &amp;&amp;
gcc tools/qt-faststart.c -o tools/qt-faststart</userinput></screen>

    <para>
      Install the package:
    </para>

<screen role="root"><userinput>porg -lD "make -j1 install &amp;&amp;
install -v -m755 tools/qt-faststart /bin"</userinput></screen>

    <sect3>
      <title>Command Explanations</title>

      <para>
        <command>sed -i ... configure</command>: This command adds the ALSA
        library to the Flite <envar>LDFLAGS</envar> variable and enables the
        discovery of Flite.
      </para>

      <para>
        <parameter>--enable-gpl</parameter>: Enables the use of GPL code and
        permits support for postprocessing, swscale and many other features.
      </para>

      <para>
        <parameter>--enable-version3</parameter>: Enables the use of (L)GPL
        version 3 code.
      </para>

      <para>
        <parameter>--enable-nonfree</parameter>: Enables the use of nonfree
        code. Note that the resulting libraries and binaries will be
        unredistributable.
      </para>

      <para>
        <parameter>--enable-libass</parameter>: Enables ASS/SSA subtitle format
        rendering via <filename class="libraryfile">libass</filename>.
      </para>

      <para>
        <parameter>--enable-libfdk-aac</parameter>: Enables currently the
        highest-quality AAC audio encoding via <filename
        class="libraryfile">libfdk-aac</filename>.
      </para>

      <para>
        <parameter>--enable-libmp3lame</parameter>: Enables MP3 audio encoding
        via <filename class="libraryfile">libmp3lame</filename>.
      </para>

      <para>
        <parameter>--enable-libvorbis --enable-libtheora</parameter>: Enables
        Theora video encoding via <filename
        class="libraryfile">libvorbis</filename> and <filename
        class="libraryfile">libtheora</filename>.
      </para>

      <para>
        <parameter>--enable-libvorbis --enable-libvpx</parameter>: Enables WebM
        encoding via <filename class="libraryfile">libvorbis</filename> and
        <filename class="libraryfile">libvpx</filename>.
      </para>

      <para>
        <parameter>--enable-libx264</parameter>: Enables high-quality
        H.264/MPEG-4 AVC encoding via <filename
        class="libraryfile">libx264</filename>.
      </para>

      <para>
        <parameter>--enable-openssl</parameter>: Enables HTTPS protocol for
        network streams.
      </para>

      <para>
        <parameter>--enable-libx265</parameter>: Enables high-quality
        H.265/HEVC encoding via <filename
        class="libraryfile">libx265</filename>.
      </para>

      <para>
        <parameter>--enable-x11grab</parameter>: Enables X11 grabbing.
      </para>

      <para>
        <command>gcc tools/qt-faststart.c -o tools/qt-faststart</command>: This
        builds the <command>qt-faststart</command> program which can modify
        QuickTime formatted movies (<filename class="extension">.mov</filename>
        or <filename class="extension">.mp4</filename>) so that the header
        information is located at the beginning of the file instead of the end.
        This allows the movie file to begin playing before the entire file has
        been downloaded.
      </para>

      <note>
        <para>
          Support for most of the dependency packages requires using options
          passed to the <command>configure</command> script. View the output
          from <command>./configure --help</command> for complete information
          about enabling dependency packages.
        </para>
      </note>

    </sect3>

  </sect2>
<!--
  <sect2>
    <title>Configuration</title>

    <sect3>
      <title>Config Files</title>

      <para>
        <filename>/etc/ffserver.conf</filename> and
        <filename>~/.ffmpeg/ffserver-config</filename>
      </para>

      <para>
        You'll find a sample <command>ffserver</command> configuration file at
        <filename>doc/ffserver.conf</filename> in the source tree.
      </para>

    </sect3>

  </sect2>
-->
</sect1>

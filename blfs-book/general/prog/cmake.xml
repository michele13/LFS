<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY cmake-homepage      "http://www.cmake.org/">
  <!ENTITY cmake-wikipedia     "http://en.wikipedia.org/wiki/CMake">
  <!ENTITY cmake-download-http "http://www.cmake.org/files/v3.3/cmake-&cmake-version;.tar.gz">
  <!ENTITY cmake-download-ftp  " ">
  <!ENTITY cmake-md5sum        "52638576f4e1e621fed6c3410d3a1b12">
  <!ENTITY cmake-size          "6.3 MB">
  <!ENTITY cmake-buildsize     "0.3 GB">
  <!ENTITY cmake-time          "3.1 SBU">
]>

<sect1 id="cmake" xreflabel="cmake-&cmake-version;">
  <?dbhtml filename="cmake.html"?>

  <title>cmake-&cmake-version;</title>

  <sect2 role="package">
    <title>Introduction</title>

    <para>
      CMake is used to control the software compilation process using simple
      platform and compiler independent configuration files. CMake generates
      native makefiles and workspaces that can be used in the compiler
      environment of your choice. CMake is quite sophisticated: it is possible
      to support complex environments requiring system configuration,
      pre-processor generation, code generation, and template instantiation.
    </para>

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Homepage: <ulink url="&cmake-homepage;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Wikipedia: <ulink url="&cmake-wikipedia;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Download (HTTP): <ulink url="&cmake-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Download (FTP): <ulink url="&cmake-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Download MD5 sum: &cmake-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Download size: &cmake-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimated disk space required: &cmake-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimated build time: &cmake-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dependencies</bridgehead>

    <bridgehead renderas="sect4">Recommended</bridgehead>
    <para>
      <xref linkend="expat"/>,
      <xref linkend="libarchive"/>, and
      <xref linkend="curl"/>
    </para>
<!--
    <bridgehead renderas="sect4">Optional</bridgehead>
    <para>
      <xref linkend="ncurses"/>
    </para>
-->
  </sect2>

  <sect2>
    <title>Installation</title>

    <para>
      Suppress installation of unnecessary files:
    </para>

<screen><userinput>sed "/CMAKE_DOC_DIR/d" -i CMakeLists.txt
sed "/if(BUILD_CursesDialog)/iset(BUILD_CursesDialog 0)" -i CMakeLists.txt
sed "/CMAKE_DOC_DIR/d" -i Utilities/cm*/CMakeLists.txt</userinput></screen>

    <para>
      Prepare the package for compilation:
    </para>

<screen><userinput>./bootstrap --prefix= \
            --mandir=/share/man \
            --system-libs \
            --no-system-jsoncpp</userinput></screen>

    <para>
      Compile the package:
    </para>

<screen><userinput>make</userinput></screen>

    <para>
      Install the package:
    </para>

<screen role="root"><userinput>porg -lD -E $PWD "make -j1 install"</userinput></screen>

    <sect3>
      <title>Command Explanations</title>

      <para>
        <parameter>--system-libs</parameter>: This switch forces the build
        system to link against libz, libcurl, libbz2, liblzma, libarchive, and
        libexpat installed on the system.
      </para>

      <para>
        <parameter>--no-system-jsoncpp</parameter>: This switch removes the
        <application>JSON-C++</application> library from the list of system
        libraries. A bundled version of that library is used instead.
      </para>

    </sect3>

  </sect2>

</sect1>

<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
   "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
  <!ENTITY % general-entities SYSTEM "../../general.ent">
  %general-entities;

  <!ENTITY readline-homepage      "http://cnswww.cns.cwru.edu/php/chet/readline/rltop.html">
  <!ENTITY readline-wikipedia     "http://en.wikipedia.org/wiki/GNU_Readline">
  <!ENTITY readline-download-http "http://ftp.gnu.org/gnu/readline/readline-&readline-version;.tar.gz">
  <!ENTITY readline-download-ftp  "ftp://ftp.gnu.org/gnu/readline/readline-&readline-version;.tar.gz">
  <!ENTITY readline-md5sum        "205b03a87fc83dab653b628c59b9fc91">
  <!ENTITY readline-size          "2.4 MB">
  <!ENTITY readline-buildsize     "11 MB">
  <!ENTITY readline-time          "0.1 SBU">
]>

<sect1 id="readline" xreflabel="readline-&readline-version;">
  <?dbhtml filename="readline.html"?>

  <title>readline-&readline-version;</title>

  <sect2 role="package">
    <title>Introduction</title>

  <para>
    The readline package is a set of libraries that offers command-line editing
    and history capabilities.
  </para>

    <bridgehead renderas="sect3">Package Information</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Homepage: <ulink url="&readline-homepage;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Wikipedia: <ulink url="&readline-wikipedia;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Download (HTTP): <ulink url="&readline-download-http;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Download (FTP): <ulink url="&readline-download-ftp;"/>
        </para>
      </listitem>
      <listitem>
        <para>
          Download MD5 sum: &readline-md5sum;
        </para>
      </listitem>
      <listitem>
        <para>
          Download size: &readline-size;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimated disk space required: &readline-buildsize;
        </para>
      </listitem>
      <listitem>
        <para>
          Estimated build time: &readline-time;
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Additional Downloads</bridgehead>
    <itemizedlist spacing="compact">
      <listitem>
        <para>
          Recommended patch:
          <ulink url="&patch-root;readline/readline-&readline-version;-unnecessary-1.patch"/>
        </para>
      </listitem>
    </itemizedlist>

    <bridgehead renderas="sect3">Dependencies</bridgehead>

    <bridgehead renderas="sect4">Required</bridgehead>
    <para>
      <xref linkend="netbsd-curses"/>
    </para>

  </sect2>

  <sect2>
    <title>Installation</title>

    <para>
      Suppress installation of unnecessary files:
    </para>

<screen><userinput>patch -p1 -i ../readline-&readline-version;-unnecessary-1.patch</userinput></screen>

    <para>
      Reinstalling Readline will cause the old libraries to be moved to
      &lt;libraryname&gt;.old. While this is normally not a problem, in some
      cases it can trigger a linking bug in <command>ldconfig</command>. This
      can be avoided by issuing the following two seds:
    </para>

<screen><userinput>sed -i '/MV.*old/d' Makefile.in &amp;&amp;
sed -i '/{OLDSUFF}/c:' support/shlib-install</userinput></screen>

    <para>
      Prepare the package for compilation:
    </para>

<screen><userinput>./configure --prefix= \
            --disable-static</userinput></screen>

    <para>
      Compile the package:
    </para>

<screen><userinput>make SHLIB_LIBS=-lncursesw</userinput></screen>

    <para>
      Install the package:
    </para>

<screen role="root"><userinput>porg -lD "make SHLIB_LIBS=-lncursesw -j1 install"</userinput></screen>

    <sect3>
      <title>Command Explanations</title>

      <para>
        <envar>SHLIB_LIBS=-lncursesw</envar>: This option forces Readline to
        link against the <filename class="libraryfile">libncursesw</filename>
        library. 
      </para>

    </sect3>

  </sect2>

  <sect2>
    <title>Configuration</title>

    <para>
      The <filename>inputrc</filename> file handles keyboard mapping for
      specific situations. This file is the startup file used by readline.
    </para>

    <para>
      Most people do not need user-specific keyboard mappings so the command
      below creates a global <filename>/etc/inputrc</filename> used by everyone
      who logs in. If you later decide you need to override the defaults on a
      per-user basis, you can create a <filename>.inputrc</filename> file in
      the user's home directory with the modified mappings.
    </para>

    <para>
      Below is a generic global <filename>inputrc</filename> along with
      comments to explain what the various options do. Note that comments
      cannot be on the same line as commands. Create the file using the
      following command:
    </para>

<screen><userinput>cat &gt; /etc/inputrc &lt;&lt; "EOF"
<literal># Allow the command prompt to wrap to the next line
set horizontal-scroll-mode Off

# Enable 8bit input
set meta-flag On
set input-meta On

# Turns off 8th bit stripping
set convert-meta Off

# Keep the 8th bit for display
set output-meta On

# none, visible or audible
set bell-style none

# All of the following map the escape sequence of the value contained in the
# 1st argument to the readline specific functions
"\eOd": backward-word
"\eOc": forward-word

# for linux console
"\e[1~": beginning-of-line
"\e[4~": end-of-line
"\e[5~": beginning-of-history
"\e[6~": end-of-history
"\e[3~": delete-char
"\e[2~": quoted-insert

# for xterm
"\eOH": beginning-of-line
"\eOF": end-of-line

# for Konsole
"\e[H": beginning-of-line
"\e[F": end-of-line</literal>
EOF
ls /etc/inputrc | porg -lD+</userinput></screen>

  </sect2>

</sect1>
